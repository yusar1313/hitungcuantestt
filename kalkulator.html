<!DOCTYPE html>

<html lang="id">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>Kalkulator Hitung Cuan</title>
<link href="style.minimal.css" rel="stylesheet"/>
<style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
      background-color: #f9f9f9;
      color: #111827;
    }
    .calculate-btn {
      margin-top: 1.5rem;
      background: #0a84ff;
      color: white;
      padding: 0.75rem 1.5rem;
      border: none;
      border-radius: 1rem;
      font-weight: 600;
      font-size: 1rem;
      cursor: pointer;
      width: 100%;
      box-shadow: 0 4px 8px rgba(0,0,0,0.05);
      transition: background 0.3s;
    }
    .calculate-btn:hover {
      background: #006fe6;
    }

    #sidebarMenu {
      position: fixed;
      top: 0;
      left: -260px;
      width: 220px;
      height: 100%;
      background: #ffffff;
      color: #111827;
      z-index: 1000;
      padding: 2rem 1rem;
      transition: left 0.3s ease;
      display: flex;
      flex-direction: column;
      box-shadow: 2px 0 8px rgba(0,0,0,0.1);
    }
    #sidebarMenu.active {
      left: 0;
    }
    #sidebarMenu a {
      display: flex;
      align-items: center;
      gap: 0.75rem;
      padding: 0.6rem 1rem;
      margin-bottom: 0.75rem;
      border-radius: 0.75rem;
      text-decoration: none;
      color: #111827;
      font-weight: 500;
      transition: background 0.2s;
    }
    #sidebarMenu a svg {
      width: 20px;
      height: 20px;
    }
    #sidebarMenu a:hover, #sidebarMenu a.active {
      background: #f3f4f6;
    }
    #sidebarBackdrop {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      background: rgba(0,0,0,0.2);
      z-index: 999;
      display: none;
    }
    #sidebarBackdrop.active {
      display: block;
    }
    #logoutBtn {
      background: #ff3b30;
      color: white;
      padding: 0.6rem 1rem;
      border: none;
      border-radius: 1rem;
      font-weight: 600;
      cursor: pointer;
      margin-top: 1.5rem;
    }

    @media (max-width: 600px) {
      header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 1.5rem;
      }
      .logo {
        height: 80px !important;
        margin: 0 auto;
      }
      .grid {
        gap: 1.25rem;
        margin-top: 1rem;
      }
      .grid input {
        padding: 0.75rem;
        font-size: 1rem;
        border-radius: 0.75rem;
        border: 1px solid #e5e7eb;
      }
      .grid label {
        font-weight: 500;
        margin-bottom: 0.3rem;
        display: block;
        font-size: 0.95rem;
      }
    }
  
.header-flex {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 2rem;
  flex-wrap: wrap;
  gap: 1rem;
}
.menu-btn {
  padding: 0.5rem 1rem;
  background: #111827;
  color: white;
  border: none;
  border-radius: 0.75rem;
  font-weight: 600;
  cursor: pointer;
}
.header-flex {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 0 1rem;
}

.logo {
  max-width: 80px;
  width: 100%;
  height: auto;
  object-fit: contain;
  margin-left: 120px;
}






/* Responsive logo & header */
.header-flex {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 0 1rem;
  flex-wrap: nowrap;
}
.logo {
  max-width: 100px;
  height: auto;
  margin: 0;
  object-fit: contain;
}


.result-item {
  text-align: center;
  margin-top: 1rem;
}
.result-label {
  font-weight: 500;
  font-size: 0.9rem;
  color: #000000;
}
.result-value {
  font-size: 1.25rem;
  font-weight: bold;
  color: #111827;
}
.result-box {
  background: #22c55e;
  padding: 1rem;
  border-radius: 1rem;
  text-align: center;
  color: white;
  margin-bottom: 1rem;
}
</style>
</head>
<body>
<div id="sidebarBackdrop" onclick="toggleSidebar()"></div>
<div id="sidebarMenu">
<a class="active" href="/kalkulator">
<svg fill="none" stroke="currentColor" stroke-width="2" viewbox="0 0 24 24"><path d="M9 5h6M9 9h6m-6 4h6m-6 4h6" stroke-linecap="round" stroke-linejoin="round"></path></svg>
      Kalkulator
    </a>
    <a href="/riwayat">
      <svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
        <path d="M4 16h2V8H4v8zm6 0h2V4h-2v12zm6 0h2v-6h-2v6z" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>
      Histori Kalkulator
    </a>    
    <a href="/rekap-penjualan">
      <svg fill="none" stroke="currentColor" stroke-width="2" viewbox="0 0 24 24"><path d="M9 17v-2h6v2m-3-9a4 4 0 014 4v1H8v-1a4 4 0 014-4z" stroke-linecap="round" stroke-linejoin="round"></path></svg>
            Rekap Penjualan
          </a>
   <a href="/admin">
      <svg fill="none" stroke="currentColor" stroke-width="2" viewbox="0 0 24 24"><path d="M9 17v-2h6v2m-3-9a4 4 0 014 4v1H8v-1a4 4 0 014-4z" stroke-linecap="round" stroke-linejoin="round"></path></svg>
                  Admin Panel
           </a>
    
<button id="logoutBtn">Logout</button>
</div>
<div class="container">
<header class="header-flex">
<button class="menu-btn" onclick="toggleSidebar()">â˜° Menu</button>
<img alt="Logo Hitung Cuan" class="logo" src="logo.png"/>
</header>
<h2 style="text-align: center;">Kalkulator Hitung Cuan</h2>
<div class="grid">
<div><label>HPP per Produk (Rp)</label><input id="productCost" type="text" value=""/></div>
<div><label>Harga Jual per Produk (Rp)</label><input id="sellingPrice" type="text" value=""/></div>
<div><label>Jumlah Penjualan</label><input id="sales" type="number" value=""/></div>
<div><label>Total Iklan (Rp)</label><input id="adSpend" type="text" value=""/></div>
<div><label>Biaya Admin Iklan (%)</label><input id="adminFee" max="100" min="0" type="number" value=""/></div>
<div><label>Estimasi Return (%)</label><input id="returnRate" max="100" min="0" type="number" value=""/></div>
</div>
<button class="calculate-btn" id="calculateBtn">Hitungin Cuannya Bro!</button>
<h3>Hasil Perhitungan</h3>
<div class="result">
<div class="result-box green">
<div class="result-label">Laba Bersih per Penjualan:</div>
<div class="result-value" id="netProfit">Rp 0</div>
</div>
<div class="result-box green">
<div class="result-label">Potensi Laba Total:</div>
<div class="result-value" id="potentialProfit">Rp 0</div>
</div>
<div class="result-item">
<div class="result-label">Margin Keuntungan</div>
<div class="result-value" id="profitMargin">0%</div>
</div>
<div class="result-item">
<div class="result-label">ROAS</div>
<div class="result-value" id="roas">0</div>
</div>
<div class="result-item">
<div class="result-label">Average CPR</div>
<div class="result-value" id="cpr">Rp 0</div>
</div>
</div>
<h3>Saran Evaluasi Iklan</h3>
<div class="evaluation-box" id="adEvaluation">
<p>Masukkan data dan klik tombol "Hitung" untuk melihat evaluasi iklan Anda...</p>
</div>
</div>
<script src="script.js" type="module"></script>
<script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.2/firebase-app.js";
    import { getAuth, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/9.22.2/firebase-auth.js";
    import { getFirestore, doc, getDoc } from "https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore.js";

    const firebaseConfig = {
      apiKey: "AIzaSyCJF3FKYkdRc8AKICpgqE_mFWb80xzGdro",
      authDomain: "hitung-cuan.firebaseapp.com",
      projectId: "hitung-cuan",
      storageBucket: "hitung-cuan.firebasestorage.app",
      messagingSenderId: "386744606371",
      appId: "1:386744606371:web:b033a6567b643c7f5fa916",
      measurementId: "G-9QXB07L6QW"
    };

    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);
    const db = getFirestore(app);

    onAuthStateChanged(auth, async (user) => {
      if (!user) {
        window.location.href = "login.html";
        return;
      }

      const userDoc = await getDoc(doc(db, "users", user.uid));
      if (!userDoc.exists() || userDoc.data().isActive !== true) {
        alert("Akun Anda belum aktif. Hubungi admin.");
        await signOut(auth);
        window.location.href = "login.html";
        return;
      }
    });

    document.getElementById("logoutBtn").addEventListener("click", async () => {
      await signOut(auth);
      window.location.href = "login.html";
    });

    document.getElementById("calculateBtn").addEventListener("click", () => {
      calculate();
    });
  </script>
<script>
    function toggleSidebar() {
      document.getElementById("sidebarMenu").classList.toggle("active");
      document.getElementById("sidebarBackdrop").classList.toggle("active");
    }
  </script>
</body>
</html>
